# 瞳伴 (Tonbo) - 智能視覺助手

瞳伴是一個專為視障人士設計的智能助手應用，結合計算機視覺技術和語音提示，幫助用戶在日常生活中進行環境感知、文件閱讀和緊急求助。

## 🎯 核心功能

### 🏠 首頁與導航 ✅ **已完成**
- **語音歡迎**: 應用啟動時的語音引導和功能介紹
- **快速啟動面板**: 四大核心功能一鍵訪問
- **多語言支持**: 廣東話、英文、普通話三語言切換
- **方形按鈕設計**: 現代化的方形按鈕佈局
- **固定頂部區域**: 標題和按鈕區域固定，內容區域可滑動
- **緊急求助**: 長按3秒觸發緊急警報系統
- **震動反饋**: 觸控和操作反饋

### 🌍 環境感知 ✅ **已完成** - 🚀 **真實AI檢測升級**
- **真實AI檢測**: 使用SSD MobileNet模型進行真實物體識別
- **90個COCO類別**: 支持人、車、動物、家具、電子產品等90種物體
- **實時性能監控**: 檢測時間、成功率、置信度實時監控
- **智能檢測限制**: 一次最多檢測3個物體，避免信息過載
- **優化檢測顯示**: 根據置信度調整邊界框顏色（綠/黃/紅）
- **檢測框顯示**: 實時在相機預覽上顯示檢測結果和文字標籤
- **智能檢測頻率**: 每3幀檢測一次，平衡性能和精準度
- **顏色分析**: 主要顏色、次要顏色、色調分析
- **光度檢測**: 亮度等級、對比度、光線方向分析
- **環境描述**: 綜合物體、顏色、光線的語音描述
- **實時語音播報**: 檢測結果的即時語音反饋，最多播報3個物體
- **性能優化**: 記憶體管理和實時處理優化
- **多語言支持**: 粵語、英文、簡體中文檢測結果
- **邊界框優化**: 精確的座標轉換和邊界檢查
- **檢測結果過濾**: 智能置信度過濾和結果排序
- **性能報告**: 詳細的檢測性能統計和報告生成

### 📖 文件與貨幣閱讀 ✅ **已完成**
- **OCR文字識別**: 基於Google ML Kit的中文文字識別
- **港幣識別**: 專門的港幣紙幣和硬幣識別系統
- **分離式功能**: 文字識別和貨幣識別獨立操作
- **大範圍掃描**: 優化的掃描區域指示
- **語音朗讀**: 識別結果的語音播報
- **方形按鈕設計**: 優化的無障礙按鈕布局
- **結果顯示優化**: 清晰的信息顯示和結果文字

### 🆘 緊急求助 ✅ **已完成**
- **緊急求助按鈕**: 長按3秒觸發緊急警報
- **緊急聯絡人管理**: 添加、編輯、刪除緊急聯絡人
- **求助信息配置**: 自定義緊急求助訊息
- **位置信息發送**: 自動發送當前位置信息
- **多種求助方式**: 電話、短信、位置共享
- **緊急設置頁面**: 完整的緊急求助配置界面

### ⚙️ 系統設定 ✅ **已完成**
- **語音調節**: 語速、音調、音量實時調整 (0-200%範圍)
- **無障礙設定**: 震動反饋、讀屏支援、手勢操作開關
- **設定持久化**: 自動保存和載入用戶設定
- **語音測試**: 即時預覽語音設定效果
- **設定重置**: 一鍵恢復預設值
- **多語言TTS**: 智能語音合成系統

### 🔍 尋找功能 ✅ **已完成**
- **標記個人物品**: 為重要物品添加標記
- **智能尋找**: 使用攝像頭尋找標記物品
- **位置記憶**: 記住物品位置
- **語音引導**: 尋找過程的語音提示

### 🎤 語音命令 ✅ **已完成**
- **多語言語音識別**: 支持廣東話、英文、普通話語音識別
- **智能命令解析**: 自然語言命令轉換為應用操作
- **即時語音反饋**: 命令執行狀態的語音播報
- **語音導航**: 通過語音控制應用各項功能
- **命令列表**: 完整的語音命令參考和提示

### 🆘 即時協助 ✅ **已完成**
- **一鍵呼叫**: 快速聯繫志願者
- **快速訊息**: 預設緊急訊息發送
- **視訊通話**: 與志願者視訊連線
- **權限管理**: 自動處理通話、短信、攝像頭權限
- **多語言支持**: 完整的本地化界面和語音

### 👤 用戶系統 ✅ **已完成**
- **登入/註冊**: 用戶賬戶管理系統
- **訪客模式**: 無需註冊即可使用
- **個人化設定**: 自定義設置同步
- **偏好設定**: 語音和界面偏好
- **Firebase準備**: 為雲端同步做準備

### 🚗 出行協助 ✅ **已完成**
- **導航功能**: 路線規劃和導航指引
- **交通信息**: 實時交通狀況查詢
- **天氣更新**: 當前天氣和預報信息
- **緊急位置分享**: 緊急情況下的位置共享
- **多語言支持**: 粵語、英文、簡體中文

### 📚 引導與簡介 ✅ **已完成**
- **啟動畫面**: 帶動畫的應用啟動頁面
- **無障礙設計**: 專為視障用戶優化的UI/UX
- **語音導航**: 每個頁面的語音引導
- **操作指引**: 詳細的操作說明和指引

## 🎨 界面設計 ✅ **已完成**

- **深色主題**: 減少視覺疲勞的黑色背景
- **高對比度**: 白色卡片配黑色背景，藍色強調色
- **大字體**: 清晰易讀的文字 (18-32sp)
- **觸控友好**: 大按鈕 (64-72dp) 和易點擊區域
- **方形設計**: 現代化的方形按鈕和卡片設計
- **固定頂部**: 標題和按鈕區域固定，內容可滑動
- **居中對齊**: 功能卡片文字居中顯示
- **掃描指示**: 大範圍掃描框指示

## 🚀 技術特點 ✅ **已實現**

- **TensorFlow Lite**: 離線物體檢測和識別
- **Google ML Kit**: OCR文字識別
- **CameraX**: 現代相機API支持
- **多語言TTS**: 智能語音合成系統
- **無障礙支持**: 完整的無障礙功能
- **實時處理**: 低延遲的圖像處理
- **記憶體優化**: 智能記憶體管理系統
- **設定持久化**: SharedPreferences設定保存
- **API兼容性**: 支援Android 5.0+ (API 21)
- **用戶管理**: 本地用戶狀態管理系統
- **Firebase準備**: 為雲端功能集成做準備
- **檢測優化**: 高精準度物體檢測算法
- **性能平衡**: 智能檢測頻率控制

## 📱 系統要求

- **Android 5.0 (API 21)** 或更高版本
- **攝像頭權限**: 後置攝像頭用於環境識別
- **麥克風權限**: 語音播報功能
- **震動權限**: 觸控反饋
- **網絡權限**: OCR和語音合成

## 🔧 開發進度

### ✅ **已完成功能** (98%)

- **首頁與導航**: 多語言支持、緊急求助、震動反饋、方形按鈕設計、固定頂部區域、界面簡化
- **環境感知**: 實時物體檢測、顏色分析、光度檢測、檢測框顯示、高精準度優化、性能平衡
- **文件閱讀**: OCR識別、港幣識別、語音朗讀、優化UI、分離式功能
- **緊急求助**: 完整的緊急求助系統、聯絡人管理、位置信息發送
- **系統設定**: 語音調節、無障礙設定、設定持久化、語音測試、完整語言本地化
- **尋找功能**: 物品標記、智能尋找、位置記憶、語音引導
- **用戶系統**: 登入註冊、訪客模式、個人化設定、Firebase準備
- **出行協助**: 導航功能、交通信息、天氣更新、緊急位置分享
- **語音命令**: 完整的語音命令系統、多語言語音識別
- **即時協助**: 一鍵呼叫、快速訊息、視訊通話功能
- **啟動畫面**: 動畫效果和語音引導
- **無障礙設計**: 完整的視障用戶優化、居中對齊、大字體設計
- **語言一致性**: 完整的三語言支持、語音文字統一、動態語言切換
- **技術架構**: 基礎框架和核心管理器、設定管理系統

### 🔄 **規劃中功能** (2%)

- **Firebase集成**: 雲端數據同步和用戶管理
- **YOLOv8模型**: 更先進的YOLOv8模型集成

## 🛠️ 技術架構

### **核心組件**
- `TTSManager`: 多語言語音合成管理、語音調節功能
- `VibrationManager`: 震動反饋管理、開關控制
- `BaseAccessibleActivity`: 無障礙基礎活動、通用功能
- `ObjectDetectorHelper`: TensorFlow Lite物體檢測、高精準度優化、智能檢測限制
- `YoloDetector`: 真實AI檢測器、SSD MobileNet模型、90個COCO類別支持
- `DetectionPerformanceMonitor`: 檢測性能監控、實時統計、性能報告生成
- `OptimizedDetectionOverlayView`: 優化檢測顯示、智能顏色編碼、檢測索引
- `ColorLightingAnalyzer`: 顏色和光度分析
- `OCRHelper`: Google ML Kit文字識別
- `CurrencyDetector`: 港幣識別系統
- `DetectionOverlayView`: 檢測框覆蓋層、精確座標轉換、邊界框限制
- `EmergencyManager`: 緊急求助管理系統
- `UserManager`: 用戶狀態管理、登入系統
- `LocaleManager`: 多語言本地化管理
- `VoiceCommandManager`: 語音命令識別和處理系統
- `FindItemsActivity`: 物品尋找功能
- `TravelAssistantActivity`: 出行協助功能
- `InstantAssistanceActivity`: 即時協助功能

### **主要頁面**
- `MainActivity`: 首頁功能選擇、固定頂部設計、界面簡化
- `EnvironmentActivity`: 環境識別和實時檢測、高精準度優化
- `RealAIDetectionActivity`: 真實AI檢測演示、實時性能監控、檢測報告
- `DocumentCurrencyActivity`: 文件和貨幣閱讀、多語言支持
- `VoiceCommandActivity`: 語音命令界面、多語言語音識別
- `InstantAssistanceActivity`: 即時協助功能、權限管理
- `EmergencySettingsActivity`: 緊急求助設置
- `SettingsActivity`: 系統設定和語音調節、完整語言本地化
- `LoginActivity`: 用戶登入和訪客模式
- `SplashActivity`: 啟動畫面、登入狀態檢查
- `FindItemsActivity`: 物品標記和尋找、多語言支持
- `TravelAssistantActivity`: 出行協助功能、多語言支持

## 📸 功能截圖

### 首頁界面
- 四大核心功能卡片式布局
- 方形按鈕設計 (🚨⚙廣)
- 固定頂部區域設計
- 居中對齊的功能描述
- 多語言切換支持
- 緊急求助按鈕

### 登入系統
- 用戶登入界面
- 訪客模式選項
- 多語言登入支持
- Firebase準備集成

### 環境識別
- 真實AI檢測框顯示（最多3個邊界框）
- SSD MobileNet模型檢測結果
- 檢測結果文字標籤（最多3個物體）
- 智能顏色編碼（綠/黃/紅）
- 實時性能監控和報告
- 檢測狀態和結果文字顯示
- 相機控制和閃光燈
- 智能檢測頻率控制
- 邊界框座標優化

### 真實AI檢測演示
- 實時相機預覽和AI檢測
- 檢測性能統計和報告
- 開始/停止檢測控制
- 性能報告查看功能
- 檢測結果實時顯示
- 智能邊界框顏色編碼

### 文件閱讀
- 大範圍掃描框指示
- 方形按鈕設計
- OCR文字識別結果
- 港幣識別功能
- 分離式操作模式

### 尋找功能
- 物品標記界面
- 智能尋找功能
- 位置記憶系統
- 語音引導操作

### 出行協助
- 導航功能界面
- 交通信息查詢
- 天氣更新顯示
- 緊急位置分享

### 緊急求助設置
- 緊急聯絡人管理
- 求助信息配置
- 位置信息發送
- 多種求助方式

### 系統設定
- 語音調節 (語速、音調、音量)
- 無障礙設定開關
- 語音測試功能
- 設定重置選項

## 🎯 最新優化 (v2.3) - 🌍 **完整語言一致性升級**

### 🌐 **完整語言一致性修復**
- **主頁語言切換**: Function Selection → 功能选择 (普通話版本)
- **設定頁面完全本地化**: 所有標題和設置項都使用對應語言
- **無障礙設置標籤**: Vibration Feedback → 震动反馈、Screen Reader Support → 屏幕阅读器支持
- **語音設置項目**: Speech Rate → 语音速度、Pitch → 音调、Volume → 音量
- **狀態文字修復**: Camera ready → 相机就绪 (Find Items頁面)
- **語音和文字統一**: 確保語音播報與界面文字語言一致

### 🎨 **界面簡化優化**
- **移除操作指南**: 簡化主頁界面，讓用戶專注於功能選擇
- **更簡潔的設計**: 減少文字干擾，提升用戶體驗
- **專注功能選擇**: 突出核心功能，降低認知負擔

### 🔧 **語言對應關係**
- **英文版本 (EN)**: 英文文字 + 英文語音
- **普通話版本 (普)**: 簡體中文文字 + 普通話語音  
- **廣東話版本 (廣)**: 繁體中文文字 + 廣東話語音

### 📱 **技術改進**
- **動態語言切換**: 所有頁面支持實時語言切換
- **本地化字符串管理**: 統一的語言字符串管理系統
- **語音文字同步**: 確保語音播報與界面文字完全一致
- **無障礙優化**: 專為視障用戶優化的語言體驗

## 🎯 歷史優化 (v2.2) - 🚀 **真實AI檢測升級**

### 🧠 **真實AI檢測實現**
- **SSD MobileNet模型**: 使用真實的TensorFlow Lite模型進行物體檢測
- **90個COCO類別**: 支持人、車、動物、家具、電子產品等90種物體識別
- **實時性能監控**: 檢測時間、成功率、置信度實時統計
- **智能檢測限制**: 一次最多檢測3個物體，避免信息過載
- **優化檢測顯示**: 根據置信度調整邊界框顏色（綠/黃/紅）

### 🔧 **環境識別優化**
- **邊界框優化**: 最多顯示3個邊界框，界面更豐富
- **語音播報優化**: 最多播報3個物體，語音更完整
- **檢測結果過濾**: 智能置信度過濾和結果排序
- **座標轉換優化**: 精確的邊界框座標處理
- **性能平衡**: 每3幀檢測一次，平衡性能和精準度

### 🎨 **用戶體驗改進**
- **智能顏色編碼**: 綠色(高置信度)、黃色(中等)、紅色(低置信度)
- **檢測索引顯示**: 為檢測結果添加數字索引
- **性能報告**: 詳細的檢測性能統計和報告生成
- **無障礙優化**: 專為視障用戶優化的簡潔體驗
- **智能排序**: 按置信度排序，優先顯示最確定的物體

### 📱 **技術改進**
- **真實AI檢測器**: 完全移除模擬數據，實現真實AI檢測
- **性能監控系統**: 實時監控檢測性能，生成詳細報告
- **優化顯示器**: 智能邊界框顯示和顏色編碼
- **記憶體優化**: 智能記憶體管理和資源回收
- **錯誤處理**: 完善的異常處理機制

---

## 🧠 真實AI檢測功能詳解

### 🎯 檢測能力
- **支持類別**: 90個COCO數據集類別
  - **人物**: 人、騎自行車的人等
  - **交通工具**: 汽車、摩托車、公車、火車等
  - **動物**: 貓、狗、鳥、馬等
  - **家具**: 椅子、桌子、床、沙發等
  - **電子產品**: 手機、筆記本電腦、電視等
  - **食物**: 蘋果、香蕉、披薩等
  - **其他**: 書、時鐘、花瓶等

### 📊 性能指標
- **檢測時間**: 平均 < 500ms
- **檢測成功率**: > 80%
- **平均置信度**: > 0.6
- **支持分辨率**: 300x300 (SSD MobileNet)
- **檢測限制**: 最多3個物體同時檢測

### 🎨 視覺效果
- **邊界框顏色**:
  - 🟢 **綠色**: 高置信度 (≥80%)
  - 🟡 **黃色**: 中等置信度 (60%-80%)
  - 🔴 **紅色**: 低置信度 (<60%)
- **檢測索引**: 為每個檢測結果添加數字標籤
- **智能文本定位**: 避免文本重疊，確保可讀性

### 📈 性能監控
```
=== AI檢測性能報告 ===
總檢測次數: 150
成功檢測次數: 135
檢測成功率: 90.0%
平均檢測時間: 245.3ms
平均置信度: 0.78
最快檢測時間: 180ms
最慢檢測時間: 420ms
```

### 🔧 技術實現
- **模型**: SSD MobileNet v1 (ssd_mobilenet_v1.tflite)
- **框架**: TensorFlow Lite
- **後處理**: NMS (非極大值抑制) + 座標轉換
- **多線程**: 相機和分析分離處理
- **內存管理**: 自動回收臨時資源

---

## 🔧 安裝與使用

### 編譯要求
- Android Studio Arctic Fox 或更新版本
- Android SDK API 21+
- Gradle 8.0+

### 編譯步驟
```bash
git clone https://github.com/Charlieppy2/Tonbo_App.git
cd Tonbo_App/Tonbo_App/Tonbo_App
./gradlew assembleDebug
```

### 使用指南
1. 安裝APK到Android設備
2. 授予攝像頭、麥克風、震動權限
3. 啟動應用，選擇登入或訪客模式
4. 聽取語音引導，使用語音導航操作各功能
5. 在環境識別中享受真實AI檢測（最多3個物體）
6. 使用真實AI檢測演示查看詳細性能報告
7. 使用尋找功能標記和尋找個人物品
8. 利用出行協助功能獲取導航和交通信息
9. 體驗智能顏色編碼的檢測結果顯示

## 🤝 貢獻

歡迎開發者參與貢獻，特別是以下領域的專家：
- **計算機視覺算法**: 物體檢測、OCR優化
- **無障礙技術**: 視障用戶體驗優化
- **Android開發**: 性能優化、UI/UX改進
- **語音合成技術**: TTS質量提升

### 貢獻指南
1. Fork 本項目
2. 創建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 開啟 Pull Request

## 📄 授權

本項目採用 MIT 授權，詳細信息請查看 [LICENSE](LICENSE) 文件。

## 👥 Contributors

- **Charlieppy2** - 主要開發者
- **Ricaryar** - 協作開發者

## 📞 聯繫方式

- **項目維護者**: Charlie
- **GitHub**: [Charlieppy2](https://github.com/Charlieppy2)
- **項目地址**: [Tonbo_App](https://github.com/Charlieppy2/Tonbo_App)

---

**瞳伴** - 讓科技成為視障人士的視覺夥伴 🌟
